{"is_source_file": true, "format": "TypeScript", "description": "This file implements a lightweight API client for the Recipe Explorer application, providing functions to retrieve JSON data from a configured API base URL with support for error handling, fallback modes, and environment-based configuration.", "external_files": ["fetch API (built-in in browsers and Node.js environment)", "process.env (environment variables)"], "external_methods": ["fetch (Web API)", "console.warn", "process.env", "String.prototype.replace"], "published": ["getApiBase", "getJSON", "GetJSONOptions"], "classes": [], "methods": [{"name": "export function getApiBase(): string | null { getApiBase", "description": "Resolves and returns the API base URL from environment variables or returns null if not configured.", "scope": "", "scopeKind": ""}, {"name": "export async function getJSON<T = unknown>(path: string, options: GetJSONOptions = {}): Promise</ getJSON", "description": "Fetches JSON data from the constructed URL, handling errors and supporting abort signals.", "scope": "", "scopeKind": ""}, {"name": "async function safeText(res: Response): Promise<string> { safeText", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getApiBase", "fetch", "safeText", "console.warn"], "search-terms": ["Recipe Explorer API client", "TypeScript fetch wrapper", "environment variable API base", "getJSON error handling", "mock mode fallback"], "state": 2, "file_id": 15, "knowledge_revision": 44, "git_revision": "", "revision_history": [{"38": ""}, {"43": ""}, {"44": ""}], "ctags": [{"_type": "tag", "name": "GetJSONOptions", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^export type GetJSONOptions = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "HttpError", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^type HttpError = Error & {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^  const base = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^  const base =$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "controller", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^  const controller = new AbortController();$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "controller", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^  const signal = options.signal ?? controller.signal;$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^    const data = (await res.json()) as T;$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^    const e = err as Error & Partial<{ name: string }>;$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^export function getApiBase(): string | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getJSON", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^export async function getJSON<T = unknown>(path: string, options: GetJSONOptions = {}): Promise</", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "httpError", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^      const httpError: HttpError = new Error(`HTTP ${res.status}: ${text || res.statusText}`);$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^  const url = `${base}${path.startsWith('\\/') ? path : `\\/${path}`}`;$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^    const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "safeText", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^async function safeText(res: Response): Promise<string> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "signal", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^  const signal = options.signal ?? controller.signal;$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^      const text = await safeText(res);$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/client.ts", "pattern": "/^  const url = `${base}${path.startsWith('\\/') ? path : `\\/${path}`}`;$/", "language": "TypeScript", "kind": "constant", "scope": "getJSON", "scopeKind": "function"}], "hash": "44e4231e40149091cede9c7217ace8f6", "format-version": 4, "code-base-name": "frontend_app", "filename": "frontend_app/src/lib/api/client.ts"}