{"is_source_file": true, "format": "TypeScript", "description": "This file provides helper functions for interacting with a recipes API, including fetching recipe lists with pagination and filters, retrieving a recipe by slug, and searching recipes. It falls back to mock data when the backend API is unavailable.", "external_files": ["./client", "../types", "../mock/recipes.json"], "external_methods": ["getJSON"], "published": ["listRecipes", "getRecipeBySlug", "searchRecipes"], "classes": [], "methods": [{"name": "function normalizeTimes(r: Recipe): Recipe { normalizeTimes", "description": "Ensures totalTimeMinutes is set based on prep and cook times.", "scope": "", "scopeKind": ""}, {"name": "function filterRecipes(recipes: Recipe[], params: QueryParams): Recipe[] { filterRecipes", "description": "Filters recipes based on query parameters like search term, cuisine, course, and diet.", "scope": "", "scopeKind": ""}, {"name": "function sortRecipes(recipes: Recipe[], sortBy?: QueryParams['sortBy'], sortDir?: QueryParams['s/ sortRecipes", "description": "Sorts recipes based on specified sort key and direction.", "scope": "", "scopeKind": ""}, {"name": "function paginate<T>(items: T[], page = 1, pageSize = 12): PaginatedResult<T> { paginate", "description": "Paginates a list of items.", "scope": "", "scopeKind": ""}, {"name": "export async function listRecipes(params: QueryParams = {}): Promise<PaginatedResult<Recipe>> { listRecipes", "description": "Fetches a paginated list of recipes, attempting API call first, then falling back to mock data.", "scope": "", "scopeKind": ""}, {"name": "export async function getRecipeBySlug(slug: string): Promise<Recipe | null> { getRecipeBySlug", "description": "Retrieves a specific recipe by its slug, with fallback to mock data.", "scope": "", "scopeKind": ""}, {"name": "export async function searchRecipes(q: string, limit = 10): Promise<Recipe[]> { searchRecipes", "description": "Performs a search for recipes based on a query string, with fallback to mock data.", "scope": "", "scopeKind": ""}], "calls": ["getJSON"], "search-terms": ["recipes.ts", "Recipe API helpers", "mock dataset", "pagination", "filtering", "search", "fallback", "backend endpoints", "mockData"], "state": 2, "file_id": 16, "knowledge_revision": 47, "git_revision": "", "revision_history": [{"40": ""}, {"45": ""}, {"46": ""}, {"47": ""}], "ctags": [{"_type": "tag", "name": "$", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const endpoint = `\\/recipes${query.toString() ? `?${query.toString()}` : ''}`;$/", "language": "TypeScript", "kind": "constant", "scope": "listRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "MOCK_RECIPES", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^const MOCK_RECIPES: Recipe[] = (mockData as Recipe[]).map(normalizeTimes);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "allowed", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const allowed: Array<NonNullable<QueryParams['sortBy']>> = [$/", "language": "TypeScript", "kind": "constant", "scope": "sortRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "course", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const course = params.course?.toString().toLowerCase();$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "cuisine", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const cuisine = params.cuisine?.toString().toLowerCase();$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "diet", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const diet = params.diet?.toString().toLowerCase();$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "diets", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^      const diets = (r.diets || []).map((d) => d.toLowerCase());$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "dir", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const dir = sortDir === 'desc' ? -1 : 1;$/", "language": "TypeScript", "kind": "constant", "scope": "sortRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "end", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const end = start + ps;$/", "language": "TypeScript", "kind": "constant", "scope": "paginate", "scopeKind": "function"}, {"_type": "tag", "name": "endpoint", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const endpoint = `\\/recipes${query.toString() ? `?${query.toString()}` : ''}`;$/", "language": "TypeScript", "kind": "constant", "scope": "listRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "filterRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^function filterRecipes(recipes: Recipe[], params: QueryParams): Recipe[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "filtered", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const filtered = filterRecipes(MOCK_RECIPES, { q: query });$/", "language": "TypeScript", "kind": "constant", "scope": "searchRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "filtered", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const filtered = sortRecipes($/", "language": "TypeScript", "kind": "constant", "scope": "listRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "getRecipeBySlug", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^export async function getRecipeBySlug(slug: string): Promise<Recipe | null> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "hay", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^      const hay = [$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "listRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^export async function listRecipes(params: QueryParams = {}): Promise<PaginatedResult<Recipe>> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "normalizeTimes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^function normalizeTimes(r: Recipe): Recipe {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const p = Math.max(1, page);$/", "language": "TypeScript", "kind": "constant", "scope": "paginate", "scopeKind": "function"}, {"_type": "tag", "name": "pageItems", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const pageItems = items.slice(start, end);$/", "language": "TypeScript", "kind": "constant", "scope": "paginate", "scopeKind": "function"}, {"_type": "tag", "name": "paginate", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^function paginate<T>(items: T[], page = 1, pageSize = 12): PaginatedResult<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "ps", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const ps = Math.max(1, pageSize);$/", "language": "TypeScript", "kind": "constant", "scope": "paginate", "scopeKind": "function"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const q = params.q?.toLowerCase().trim();$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const endpoint = `\\/recipes${query.toString() ? `?${query.toString()}` : ''}`;$/", "language": "TypeScript", "kind": "constant", "scope": "listRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const query = new URLSearchParams();$/", "language": "TypeScript", "kind": "constant", "scope": "listRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const query = q?.trim();$/", "language": "TypeScript", "kind": "constant", "scope": "searchRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "r", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^        r.description,$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "r", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const r = MOCK_RECIPES.find((x) => x.slug === slug);$/", "language": "TypeScript", "kind": "constant", "scope": "getRecipeBySlug", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const res = await getJSON<{ items: Recipe[] }>(`\\/recipes\\/search?q=${encodeURIComponent(que/", "language": "TypeScript", "kind": "constant", "scope": "searchRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const result = await getJSON<PaginatedResult<Recipe>>(endpoint, { silentMissingBase: true })/", "language": "TypeScript", "kind": "constant", "scope": "listRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const result = await getJSON<Recipe>(`\\/recipes\\/${encodeURIComponent(slug)}`, { silentMissi/", "language": "TypeScript", "kind": "constant", "scope": "getRecipeBySlug", "scopeKind": "function"}, {"_type": "tag", "name": "searchRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^export async function searchRecipes(q: string, limit = 10): Promise<Recipe[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "sortRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^function sortRecipes(recipes: Recipe[], sortBy?: QueryParams['sortBy'], sortDir?: QueryParams['s/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const start = (p - 1) * ps;$/", "language": "TypeScript", "kind": "constant", "scope": "paginate", "scopeKind": "function"}, {"_type": "tag", "name": "ta", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^      const ta = Date.parse(String(va));$/", "language": "TypeScript", "kind": "constant", "scope": "sortRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "tb", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^      const tb = Date.parse(String(vb));$/", "language": "TypeScript", "kind": "constant", "scope": "sortRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "total", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const total =$/", "language": "TypeScript", "kind": "constant", "scope": "normalizeTimes", "scopeKind": "function"}, {"_type": "tag", "name": "total", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^  const total = items.length;$/", "language": "TypeScript", "kind": "constant", "scope": "paginate", "scopeKind": "function"}, {"_type": "tag", "name": "va", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const va = (a as unknown as { [k in typeof sortBy]?: unknown })[sortBy];$/", "language": "TypeScript", "kind": "constant", "scope": "sortRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "vb", "path": "/home/kavia/workspace/code-generation/recipe-explorer-209096-209126/frontend_app/src/lib/api/recipes.ts", "pattern": "/^    const vb = (b as unknown as { [k in typeof sortBy]?: unknown })[sortBy];$/", "language": "TypeScript", "kind": "constant", "scope": "sortRecipes", "scopeKind": "function"}], "hash": "cadbe7f1f0b0cf38c5d2d9ec4c99a115", "format-version": 4, "code-base-name": "frontend_app", "filename": "frontend_app/src/lib/api/recipes.ts"}